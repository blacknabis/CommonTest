# 월드맵 시스템 기획 (World Map System Design)

## 1. 개요
킹덤러쉬(Kingdom Rush)의 스타일을 계승하여, 플레이어가 스테이지를 선택하고 게임의 진행 상황을 파악하며 영구적인 성장을 관리하는 메인 허브로서의 월드맵을 설계한다.

## 2. 시각적 스타일 및 테마 (Visual Style & Theme)
- **아트 스타일**: 2D 카툰(만화) 스타일. 벡터 아트웍 느낌의 깔끔하고 아기자기한 디자인.
- **월드 구성**:
    - **시작**: 남쪽 항구 도시 (평화로운 느낌, 숲/초원 테마)
    - **중반**: 산맥 및 설원 (험난한 지형)
    - **후반**: 황무지 및 베즈난의 타워 (어둡고 메마른 테마)
- **경로 표현**: 스테이지 간 점선 경로로 연결하여 진행 방향을 명확히 표시. 클리어한 스테이지에는 깃발 꽂힘.

## 3. 구조 및 기능 (Structure & Features)

### 3.1 맵 탐색 및 스테이지 선택
- **스크롤/드래그**: 맵이 화면보다 크므로 드래그하여 이동 가능.
- **스테이지 노드**:
    - **잠금 상태**: 회색 아이콘 또는 자물쇠 표시.
    - **해금 상태**: 스테이지 지형/특징을 반영한 아이콘. 클릭 시 정보 팝업 표시.
    - **클리어 상태**: 획득한 별(1~3개) 표시, 깃발 애니메이션.

### 3.2 스테이지 정보 팝업 (Stage Info Popup)
스테이지 노드 클릭 시 출력되는 UI.
- **제목 및 설명**: 스테이지 이름과 간단한 스토리 텍스트.
- **난이도 및 모드 선택**:
    - **캠페인 (Campaign)**: 기본 모드. 난이도 선택 (Casual/Normal/Veteran).
    - **영웅 모드 (Heroic)**: (3성 클리어 시 해금) 엘리트 적 등장, 웨이브 구성 변경.
    - **강철 모드 (Iron)**: (3성 클리어 시 해금) 특정 타워 제한 등 하드코어 조건.
- **시작 버튼**: '전투 시작 (To Battle!)' 버튼.

### 3.3 업그레이드 시스템 (Upgrades)
- **별(Star) 재화**: 스테이지 클리어 등급에 따라 획득 (최대 3개 + 도전 모드 별).
- **스킬 트리**:
    - **타워 강화**: 궁수, 병영, 마법, 포병 4가지 트랙.
    - **스펠 강화**: 지원군 구원(Reinforcements), 불의 비(Rain of Fire) 트랙.
- **초기화(Reset)**: 언제든 별을 회수하여 재투자 가능 (전략적 유연성 제공).

### 3.4 영웅 룸 (Hero Room)
- **영웅 선택**: 보유한 영웅 중 출전할 영웅 1명 선택.
- **성장**: 영웅 레벨업 및 스킬 포인트 투자.
- **해금**: 캠페인 진행도(특정 스테이지 클리어)에 따라 새로운 영웅 해금.

## 4. 진행 및 해금 메커니즘 (Progression & Unlocks)
- **선형적 진행**: 스테이지 1 클리어 -> 스테이지 2 해금 방식.
- **타워 해금**:
    - Lv 1~3 타워: 기본 제공.
    - Lv 4 타워(특수 전직): 특정 스테이지 클리어 시 순차적으로 해금(튜토리얼 팝업과 함께 등장).
    - 예시: 4스테이지 클리어 시 3레벨 타워 해금, 5스테이지 클리어 시 레인저 해금 등.
- **도전 모드 해금**: 해당 스테이지 캠페인 모드 별 3개 획득 시 영웅/강철 모드 활성화.

## 5. UI 레이아웃 (Draft)
- **상단**: 현재 보유 별 개수, 설정 버튼.
- **중앙**: 스크롤 가능한 월드맵 (배경).
- **하단**:
    - [업그레이드] 버튼
    - [영웅] 버튼
    - [백과사전] 버튼 (적/타워 정보)
    - [상점] 버튼 (소모성 아이템 - 선택 사항)

## 6. 개발 로드맵 (구현 계획)
1.  **맵 데이터 구조 설계**: `StageData` (ID, 이름, 해금조건, 클리어상태, 별 개수 등) 정의.
2.  **월드맵 씬 구성**: 배경 이미지 배치 및 스크롤 기능 구현.
3.  **스테이지 노드 프리팹 제작**: 상태(잠금/해금/클리어)에 따른 비주얼 처리.
4.  **UI 연동**: 스테이지 정보 팝업 및 씬 전환(GameScene으로 이동) 구현.
5.  **저장 시스템 연동**: 클리어 여부 및 별 획득 현황 저장/로드.
