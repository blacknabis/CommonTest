# 2026-02-21 작업 상세 로그

## 구현 내용: AISpriteProcessor 배경 투명화 방식 교체 및 Kingdom 프로젝트로 이관
- **배경 원인 (방식 교체)**: 기존 코드 기반 (크로마 키) 배경 제거 방식의 한계를 넘기 위해, ComfyUI의 `RemBG` 노드를 통한 AI 전처리 파이프라인으로 구조를 개편하였습니다.
- **배경 원인 (파일 이관)**: `AISpriteProcessor`와 전반적인 `ComfyUI` 연동 코드들이 범용(Common)보다는 Kingdom 프로젝트에 종속적인 기능임에 따라, 모든 관련 에디터 스크립트를 Common에서 Kingdom 영역으로 이관하였습니다.
- **주요 변경사항**:
  - `Assets/Scripts/Kingdom/Editor/AISpriteProcessor.cs` 기능 강화 및 Namespace `Kingdom.Editor` 지정
  - `workflow_rembg_preprocess.json` 워크플로우 파일 신규 생성 (RemBG 단일 처리용 API)
  - `ComfyUIManager.cs`, `ComfyUIHelper.cs` 를 `Assets/Scripts/Kingdom/Editor/` 로 일괄 이동
  - 로컬 코드 기반 크로마키 UI 및 로직 제거
  - `ProcessComfyUIRemBGAsync()` 구현하여, 에디터 내에서 `ComfyUIManager`를 통해 비동기로 서버에 이미지를 업로드하고 처리된 결과를 다운로드하여 `_Transparent.png`로 저장.
  - 변환 결과물에 자동으로 Single Sprite 세팅을 적용한 뒤, 다시 툴의 소스 텍스처로 자동 선택되도록 워크플로우 편의성 개선.
- **테스트 확인**:
  - 스크립트 파일 이동 후 참조 에러(CS0246 등) 해결 완료 및 전체 Unity 에디터 정상 컴파일 확인.
  - `Tools > Common > AI Sprite Processor` 열고 `AIPreprocess` 탭 선택
  - 배경 있는 이미지를 드래그 앤 드롭한 뒤 "ComfyUI RemBG 배경 제거 ..." 버튼 클릭 및 정상 연동 파악.
