# 타워 밸런스 현황표 (2026-02-15)

기준 파일:
- `Assets/Resources/Data/TowerConfigs/Archer.asset`
- `Assets/Resources/Data/TowerConfigs/Barracks.asset`
- `Assets/Resources/Data/TowerConfigs/Mage.asset`
- `Assets/Resources/Data/TowerConfigs/Artillery.asset`
- `Assets/Resources/Data/TowerConfigs/BasicTower.asset`
- `Assets/Scripts/Kingdom/Game/TowerManager.cs`

---

## 1) 현재 SO 자산 저장값(원본)

현재 `Archer/Barracks/Mage/Artillery.asset` 4개는 저장값이 사실상 동일하다.

| Asset | TowerType | BuildCost | AttackDamage | AttackCooldown | AttackRange | DamageType | CanTargetAir | BarracksData |
|---|---:|---:|---:|---:|---:|---:|---:|---|
| Archer.asset | 0 | 70 | 34 | 0.75 | 2.2 | 0 | 1 | Squad=0, Rally=0 |
| Barracks.asset | 0 | 70 | 34 | 0.75 | 2.2 | 0 | 1 | Squad=0, Rally=0 |
| Mage.asset | 0 | 70 | 34 | 0.75 | 2.2 | 0 | 1 | Squad=0, Rally=0 |
| Artillery.asset | 0 | 70 | 34 | 0.75 | 2.2 | 0 | 1 | Squad=0, Rally=0 |
| BasicTower.asset | (미기입) | 70 | 34 | 0.75 | 2.2 | (미기입) | 1 | Squad=3, Rally=3.5 |

주의:
- 자산 YAML 기준으로는 `Levels` 배열 직렬화 데이터가 아직 없다.
- 따라서 현재 플레이 밸런스는 `TowerManager`의 런타임 보정(`PopulateDefaultData`) 영향이 크다.

---

## 2) 런타임 보정 로직(현재 코드)

적용 위치:
- `Assets/Scripts/Kingdom/Game/TowerManager.cs:114`
  - `loaded.Levels == null || loaded.Levels.Length == 0`이면 `PopulateDefaultData(loaded, type)` 실행
- `Assets/Scripts/Kingdom/Game/TowerManager.cs:478`
  - 타입별 기본값 + Lv1~3 자동 생성

### 2-1. 기본 규칙
- 레벨 수: 3 (`Levels[0..2]`)
- 비용: `70 * (1 + 0.4 * levelIndex)` 후 타입별 계수 적용
- 피해: `baseDamage * (1 + 0.3 * levelIndex)`
- 쿨다운: `baseCooldown * (1 - 0.1 * levelIndex)` (최소 0.2)
- 사거리: `baseRange + 0.2 * levelIndex`
- 시각 크기: `0.65 + 0.1 * levelIndex`

### 2-2. 타입별 기본값
- Archer: damage 34, cooldown 0.75, range 2.2, costMod 1.0
- Barracks: damage 5, cooldown 0.75, range 1.6, costMod 1.1, Squad=3
- Mage: damage 34, cooldown 1.2, range 2.0, costMod 1.4
- Artillery: damage 25, cooldown 0.75, range 2.4, costMod 1.8

### 2-3. 타입별 예상 레벨 값 (현재 코드 기준)

| Type | Lv | Cost | Damage | Cooldown | Range | VisualScale |
|---|---:|---:|---:|---:|---:|---:|
| Archer | 1 | 70 | 34.0 | 0.75 | 2.2 | 0.65 |
| Archer | 2 | 98 | 44.2 | 0.675 | 2.4 | 0.75 |
| Archer | 3 | 126 | 54.4 | 0.60 | 2.6 | 0.85 |
| Barracks | 1 | 77 | 5.0 | 0.75 | 1.6 | 0.65 |
| Barracks | 2 | 108 | 6.5 | 0.675 | 1.8 | 0.75 |
| Barracks | 3 | 139 | 8.0 | 0.60 | 2.0 | 0.85 |
| Mage | 1 | 98 | 34.0 | 1.20 | 2.0 | 0.65 |
| Mage | 2 | 137 | 44.2 | 1.08 | 2.2 | 0.75 |
| Mage | 3 | 176 | 54.4 | 0.96 | 2.4 | 0.85 |
| Artillery | 1 | 126 | 25.0 | 0.75 | 2.4 | 0.65 |
| Artillery | 2 | 176 | 32.5 | 0.675 | 2.6 | 0.75 |
| Artillery | 3 | 227 | 40.0 | 0.60 | 2.8 | 0.85 |

---

## 3) 결론(현재 상태)

- 데이터 설계 의도(`Levels` 기반)는 코드에 반영되어 있음.
- 하지만 SO 자산(`*.asset`)은 아직 레벨 기반 수치가 직접 저장/분화되지 않은 상태.
- 지금은 런타임 자동 보정으로 동작하므로, 기획 수치 밸런싱 단계에서는
  - 각 `TowerConfig` 자산에 `Levels`를 직접 입력/저장하고
  - `TowerType`, `DamageType`, `CanTargetAir`, `BarracksData`를 타입별로 명시
  해야 의도대로 고정된다.

---

## 4) 다음 밸런싱 작업 체크리스트

1. `Archer/Barracks/Mage/Artillery.asset` 각각 `Levels` 3단계 값을 수동 입력
2. 타입별 `TowerType` 정확히 지정
3. `DamageType`/관통 옵션/공중 타겟 여부 확정
4. 플레이 테스트 후 KPI(`TowerBuildRateByType`, 웨이브 클리어 시간) 기준으로 2차 조정
