# DevLog_2026_02_15_1

## 오늘의 목표
게임씬 개발을 막고 있던 핵심 병목인 **게임뷰 선행 안정화**, **전투 월드 가시화**, **웨이브/일시정지 루프 검증**을 우선 해결했다.

## 진행한 작업

### 1) 게임뷰(HUD) 우선 정리
- `GameView`를 기준 UI 계약으로 확정했다.
- 상태 표시(`Prepare/WaveRunning/WaveBreak/Result/Pause`), 웨이브 표시(`WAVE n / total`), 리소스 표시(`Lives/Gold`)를 정리했다.
- `Pause`, `Next Wave`, `Reinforce`, `Rain`, 결과 슬롯(승/패)까지 최소 동작 경로를 만들었다.

### 2) 전투 FSM 연결
- `GameStateController` 중심으로 전투 흐름을 구성했다.
- `Prepare -> WaveRunning -> WaveBreak -> Result` 기본 흐름이 동작하도록 연결했다.
- `Pause/Resume` 토글을 보강해 실제 정지 상태와 UI 상태가 일치하도록 수정했다.

### 3) 게임씬이 검게만 보이던 문제 해결
- 초기 `GameScene`이 카메라 중심/깊이 문제와 월드 오브젝트 부재로 검게 보이던 상태였다.
- 카메라를 2D 전투 기준으로 정리하고, 전투 월드 fallback 경로를 추가했다.
- `SpawnManager`에서 적 가시성을 보장하도록 기본 렌더링 경로를 마련했다.

### 4) 경로 기반 이동 검증
- `PathManager`, `SpawnManager`, `WaveManager`, `EnemyRuntime` 연결을 정리했다.
- 몬스터가 지정한 웨이포인트 경로를 따라 이동하는 동작을 실제 플레이에서 확인했다.

### 5) StageInfoPopup 프리팹/에셋 파이프라인 정리
- `StageInfoPopup` 프리팹을 제작하고, 이미지/사운드 연결 경로를 정리했다.
- 클릭음 라우팅 충돌을 정리하고 UI 클릭음 단일 경로로 통일했다.
- 나노바나나/ComfyUI용 프롬프트 문서와 빌더 흐름을 문서화했다.

### 6) GameBattlefield 프리팹 흐름 추가
- `GameScene`이 `GameBattlefield` 프리팹을 우선 사용하고, 실패 시 런타임 fallback으로 전환하도록 구성했다.
- 프리팹 스크립트 누락(Missing Script) 상황을 감지해 안전하게 우회하도록 가드를 추가했다.
- 빌더 메뉴를 통해 프리팹을 재생성하는 흐름을 마련했다.

## 이슈와 대응
- **Pause 후 Resume 불가**: 버튼 쿨다운/타임스케일 영향 경로를 수정해 즉시 재개 가능하도록 보완.
- **GameBattlefield Missing Script**: 프리팹 검증 가드 + 런타임 fallback 추가로 게임 진행이 끊기지 않게 수정.
- **인코딩 깨짐(task.md)**: UTF-8로 정리해 진행 기록을 다시 안정화.

## 오늘의 결과
- 게임뷰 표시/상태 동기화 정상.
- Pause/Resume 토글 정상.
- 웨이브 숫자 변경 정상.
- 몬스터 경로 이동 정상.
- 전투 월드 초기화 실패 시 fallback 안전성 확보.

## 다음 작업
1. `EnemyConfig`별 실제 몬스터 스프라이트 에셋 연결.
2. `StageConfig -> WaveConfig` 참조 누락 케이스 정리(완전 데이터 기반 전환).
3. 전투 월드 프리팹 구성 고도화(맵/웨이포인트/스폰 루트 정식화).

## 한 줄 회고
UI를 먼저 안정화한 선택이 맞았고, 그 덕분에 전투 로직과 월드 렌더링 문제를 빠르게 분리해 해결할 수 있었다.
